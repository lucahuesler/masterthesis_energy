% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
  letterpaper,
  DIV=11,
  numbers=noendperiod]{scrreprt}

\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\setlength{\emergencystretch}{3em} % prevent overfull lines
\setcounter{secnumdepth}{5}
% Make \paragraph and \subparagraph free-standing
\ifx\paragraph\undefined\else
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
  \let\oldsubparagraph\subparagraph
  \renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{241,243,245}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.40,0.45,0.13}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\BuiltInTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\ExtensionTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.28,0.35,0.67}{#1}}
\newcommand{\ImportTok}[1]{\textcolor[rgb]{0.00,0.46,0.62}{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\NormalTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.07,0.07,0.07}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
\newlength{\csllabelwidth}
\setlength{\csllabelwidth}{3em}
\newlength{\cslentryspacingunit} % times entry-spacing
\setlength{\cslentryspacingunit}{\parskip}
\newenvironment{CSLReferences}[2] % #1 hanging-ident, #2 entry spacing
 {% don't indent paragraphs
  \setlength{\parindent}{0pt}
  % turn on hanging indent if param 1 is 1
  \ifodd #1
  \let\oldpar\par
  \def\par{\hangindent=\cslhangindent\oldpar}
  \fi
  % set entry spacing
  \setlength{\parskip}{#2\cslentryspacingunit}
 }%
 {}
\usepackage{calc}
\newcommand{\CSLBlock}[1]{#1\hfill\break}
\newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{#1}}
\newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{#1}\break}
\newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}

<script src="site_libs/htmlwidgets-1.6.0/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="site_libs/setprototypeof-0.1/setprototypeof.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
\KOMAoption{captions}{tableheading}
\makeatletter
\@ifpackageloaded{tcolorbox}{}{\usepackage[many]{tcolorbox}}
\@ifpackageloaded{fontawesome5}{}{\usepackage{fontawesome5}}
\definecolor{quarto-callout-color}{HTML}{909090}
\definecolor{quarto-callout-note-color}{HTML}{0758E5}
\definecolor{quarto-callout-important-color}{HTML}{CC1914}
\definecolor{quarto-callout-warning-color}{HTML}{EB9113}
\definecolor{quarto-callout-tip-color}{HTML}{00A047}
\definecolor{quarto-callout-caution-color}{HTML}{FC5300}
\definecolor{quarto-callout-color-frame}{HTML}{acacac}
\definecolor{quarto-callout-note-color-frame}{HTML}{4582ec}
\definecolor{quarto-callout-important-color-frame}{HTML}{d9534f}
\definecolor{quarto-callout-warning-color-frame}{HTML}{f0ad4e}
\definecolor{quarto-callout-tip-color-frame}{HTML}{02b875}
\definecolor{quarto-callout-caution-color-frame}{HTML}{fd7e14}
\makeatother
\makeatletter
\makeatother
\makeatletter
\@ifpackageloaded{bookmark}{}{\usepackage{bookmark}}
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\AtBeginDocument{%
\ifdefined\contentsname
  \renewcommand*\contentsname{Table of contents}
\else
  \newcommand\contentsname{Table of contents}
\fi
\ifdefined\listfigurename
  \renewcommand*\listfigurename{List of Figures}
\else
  \newcommand\listfigurename{List of Figures}
\fi
\ifdefined\listtablename
  \renewcommand*\listtablename{List of Tables}
\else
  \newcommand\listtablename{List of Tables}
\fi
\ifdefined\figurename
  \renewcommand*\figurename{Figure}
\else
  \newcommand\figurename{Figure}
\fi
\ifdefined\tablename
  \renewcommand*\tablename{Table}
\else
  \newcommand\tablename{Table}
\fi
}
\@ifpackageloaded{float}{}{\usepackage{float}}
\floatstyle{ruled}
\@ifundefined{c@chapter}{\newfloat{codelisting}{h}{lop}}{\newfloat{codelisting}{h}{lop}[chapter]}
\floatname{codelisting}{Listing}
\newcommand*\listoflistings{\listof{codelisting}{List of Listings}}
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\@ifpackageloaded{subcaption}{}{\usepackage{subcaption}}
\makeatother
\makeatletter
\@ifpackageloaded{tcolorbox}{}{\usepackage[many]{tcolorbox}}
\makeatother
\makeatletter
\@ifundefined{shadecolor}{\definecolor{shadecolor}{rgb}{.97, .97, .97}}
\makeatother
\makeatletter
\makeatother
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={Estimating the heat energy use of residential buildings},
  pdfauthor={Luca Hüsler},
  colorlinks=true,
  linkcolor={blue},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={Blue},
  pdfcreator={LaTeX via pandoc}}

\title{Estimating the heat energy use of residential buildings}
\usepackage{etoolbox}
\makeatletter
\providecommand{\subtitle}[1]{% add subtitle to \maketitle
  \apptocmd{\@title}{\par {\large #1 \par}}{}{}
}
\makeatother
\subtitle{A case study in the Canton of Basel-Landschaft}
\author{Luca Hüsler}
\date{2/2/23}

\begin{document}
\maketitle
\ifdefined\Shaded\renewenvironment{Shaded}{\begin{tcolorbox}[breakable, interior hidden, enhanced, sharp corners, boxrule=0pt, borderline west={3pt}{0pt}{shadecolor}, frame hidden]}{\end{tcolorbox}}\fi

\renewcommand*\contentsname{Table of contents}
{
\hypersetup{linkcolor=}
\setcounter{tocdepth}{2}
\tableofcontents
}
\listoffigures
\listoftables
\bookmarksetup{startatroot}

\hypertarget{copyright-notice}{%
\chapter*{Copyright notice}\label{copyright-notice}}
\addcontentsline{toc}{chapter}{Copyright notice}

\markboth{Copyright notice}{Copyright notice}

© Luca Hüsler (2023).

\begin{quote}
Delete following statement if not relevant. I certify that I have made
all reasonable efforts to secure copyright permissions for third-party
content included in this thesis and have not knowingly added copyright
content to my work without the owner's permission.
\end{quote}

\begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, bottomtitle=1mm, coltitle=black, leftrule=.75mm, arc=.35mm, colback=white, opacityback=0, colbacktitle=quarto-callout-warning-color!10!white, titlerule=0mm, toptitle=1mm, title=\textcolor{quarto-callout-warning-color}{\faExclamationTriangle}\hspace{0.5em}{Warning}, rightrule=.15mm, colframe=quarto-callout-warning-color-frame, bottomrule=.15mm, toprule=.15mm, left=2mm, breakable]

This is a development version (work in progress\ldots).

\end{tcolorbox}

\bookmarksetup{startatroot}

\hypertarget{abstract}{%
\chapter*{Abstract}\label{abstract}}
\addcontentsline{toc}{chapter}{Abstract}

\markboth{Abstract}{Abstract}

To be added.

\bookmarksetup{startatroot}

\hypertarget{declaration-of-originality}{%
\chapter*{Declaration of originality}\label{declaration-of-originality}}
\addcontentsline{toc}{chapter}{Declaration of originality}

\markboth{Declaration of originality}{Declaration of originality}

Master of Science (MScIDS) in Applied Information and Data Science

The following declaration of originality must be signed by hand and
included at the end of the Master's Thesis:

``The undersigned hereby declares that he or she ‒ wrote the work in
question independently and without the help of any third party, ‒ has
provided all the sources and cited the literature used, ‒ will protect
the confidentiality interests of the client and respect the copyright
regulations of Lucerne University of Applied Sciences and Arts.''

Date and signature

\ldots\ldots\ldots\ldots\ldots\ldots\ldots{}

\hypertarget{reproducibility-statement}{%
\subsection*{Reproducibility
statement}\label{reproducibility-statement}}
\addcontentsline{toc}{subsection}{Reproducibility statement}

This thesis is written using Quarto with renv (\textbf{renv?}) to create
a reproducible environment. All materials (including the data sets and
source files) required to reproduce this document can be found at the
Github repository
\href{https://github.com/lucahuesler/masterthesis_energy}{\texttt{github.com/lucahuesler/masterthesis\_energy}}.

\bookmarksetup{startatroot}

\hypertarget{acknowledgements}{%
\chapter*{Acknowledgements}\label{acknowledgements}}
\addcontentsline{toc}{chapter}{Acknowledgements}

\markboth{Acknowledgements}{Acknowledgements}

I would like to thank my cat.

\begin{quote}
In accordance with Chapter 7.1.4 of the research degrees handbook, if
you have engaged the services of a professional editor, you must provide
their name and a brief description of the service rendered. If the
professional editor's current or former area of academic specialisation
is similar your own, this too should be stated as it may suggest to
examiners that the editor's advice to the student has extended beyond
guidance on English expression to affect the substance and structure of
the thesis. Free text section for you to record your acknowledgment and
gratitude for the more general academic input and support such as
financial support from grants and scholarships and the non-academic
support you have received during the course of your enrolment. If you
are a recipient of the ``Australian Government Research Training Program
Scholarship'', you are required to include the following statement:
\textgreater{} ``This research was supported by an Australian Government
Research Training Program (RTP) Scholarship.'' You may also wish to
acknowledge significant and substantial contribution made by others to
the research, work and writing represented and/or reported in the
thesis. These could include significant contributions to: the conception
and design of the project; non-routine technical work; analysis and
interpretation of research data; drafting significant parts of the work
or critically revising it so as to contribute to the interpretation.
\end{quote}

\clearpage\pagenumbering{arabic}\setcounter{page}{0}

\bookmarksetup{startatroot}

\hypertarget{introduction}{%
\chapter{Introduction}\label{introduction}}

\hypertarget{background}{%
\section{General Background}\label{background}}

{[}\#TODO{]}

\begin{itemize}
\item
  Global background
\item
  National background Switzerland
\end{itemize}

\hypertarget{cantonal-energy-planning}{%
\section{Energy policy in the Canton of
Basel-Landschaft}\label{cantonal-energy-planning}}

In 2021, the cantonal government of Basel-Landschaft signed the Climate
Charter of the Northwestern Intergovernmental Conference together with
the governments of the cantons of Aargau, Basel-Stadt, Jura and
Solothurn. In the Charter, the five cantons agree on the net zero target
by 2050\footnote{As defined by ({``2050 indicative target,''} n.d.), the
  net zero target means that ``\emph{from 2050 Switzerland aims to emit
  no more greenhouse gases into the atmosphere than can be captured and
  stored in natural and technological sinks (`net zero emissions').}''}.
Thus, the energy supply of the participating cantons should be switched
to 100\% renewable energy sources by no later than 2050
(Nordwestschweizer Regierungskonferenz, 2021).

The current legally valid version of the cantonal energy law defines in
\href{https://bl.clex.ch/app/de/texts_of_law/490/art/2}{§ 2 (1-4)} the
following goals (Landrat des Kantons Basel-Landschaft, n.d.):

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  The end energy consumption (german: Endenergieverbrauch) in the
  canton, excluding mobility, should be reduced by 40\% by 2050 compared
  to 2000 (6,500 GWh).
\item
  The share of renewable energies in total energy consumption (excluding
  mobility) should be increased to at least 40\% by 2030.
\item
  In the building sector, the heating demand for \textbf{new buildings}
  should be reduced to an average of 20 kilowatt hours (kWh) per square
  meter of energy reference area per year by 2030.
\item
  In the building sector, the non-renewable heating demand for
  \textbf{existing buildings} should be reduced to an average of 40 kWh
  per square meter of energy reference area per year by 2050.
\end{enumerate}

In 2022, the cantonal council published a new version of the energy
planning report, in which the above targets were reviewed for
compatibility with the net zero target. The report states that goal 1
and 3 are not compatible with the net zero target (Regierungsrat des
Kantons Basel-Landschaft, 2022). As a result of this finding, the
cantonal government submitted a proposal on behalf of the Landrat in
which the two goals are changed as follows (Regierungsrat des Kantons
Basel-Landschaft, n.d.):

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  The end energy consumption in the canton, excluding mobility, should
  be reduced by \textbf{70\%} by 2050 compared to 2000 (6,500 GWh).
\item
  In the building sector, the non-renewable heating demand for
  \textbf{existing buildings} should be reduced to an average of 40 kWh
  per square meter of energy reference area per year by 2050.
\end{enumerate}

\hypertarget{cantonal-energy-planning-1}{%
\subsection{Cantonal energy planning}\label{cantonal-energy-planning-1}}

With the total revision of the cantonal energy law in 2016, the new
\href{https://bl.clex.ch/app/de/texts_of_law/490/art/3}{§ 3} on energy
planning of the canton was introduced. This § 3 obliges the cantonal
government to create an energy plan on the basis of the federal
requirements and frameworks and to report the results to the cantonal
council. Furthermore, according to
\href{https://bl.clex.ch/app/de/texts_of_law/490/art/2}{§ 2 (6)} of the
cantonal energy law, the government council must also report
periodically on the effectiveness of the (previous) measures.

As integral part of the energy planning, the canton delivers a energy
statistics since 1990. Until 2010, the statistics was mainly based on a
top-down approach. Since 2010, a bottom-up approach has been introduced.

\hypertarget{cantonal-energy-system}{%
\subsection{Cantonal energy system}\label{cantonal-energy-system}}

In 2020, the gross energy consumption of the canton was about 7600
gigawatt hours, which corresponds to a reduction of 4.4\% compared to
2018 (Statistisches Amt des Kantons Basel-Landschaft, 2022). The
following figure @ref(fig:energieflussdiagramm) provides an overview of
the cantonal energy system.

\hypertarget{sec-problem-definition}{%
\section{Problem definition}\label{sec-problem-definition}}

As mentioned in (\textbf{cantonal-energy-planning?}), the Canton of
Basel-Landschaft conducts a cantonal energy statistics already since
1990\footnote{The tables and illustrations of the cantonal energy
  statistics are available at:
  https://www.statistik.bl.ch/web\_portal/8.}. Ever since, the energy
consumption had to be estimated at least in parts - namely for energy
sources where no measerued data has been available. In particular, this
is the case for domestic hot water (DHW) and heat energy consumption
(HEC) of residential buildings that are using non-grid connected energy
sources such as heating oil, wood-based energy systems or heat pumps. In
the latest version of the cantonal energy statistics for the year 2020,
about 40\% of the total annual energy consumption was based on
estimations .

Since 2010, the estimation is based on a new method that has been
developed together with the canton of Basel-Stadt (Statistisches Amt des
Kantons Basel-Stadt, 2022). The method uses a bottom-up approach and is
based on the register of buildings and dwellings (RBD) . The RBD
provides information about every building in the canton, such as the
building area, building category or the construction year. The building
data from the RBD is then enriched with measured energy consumption data
for gas-heated buidlings and further information from other data sources
(e.g.~the number of inhabitants or characteristics of the installed
combustion plant).

The measured gas consumption represents the total annual amount of
energy in kWh that the energy provider (Industrielle Werke Basel, IWB)
delivers to the building. This englobes DWH as well as HEC and in some
cases also energy used for cooking. However, for the estimation of HEC,
only the energy consumption that flows into the space heating should be
considered. Thus, the gas consumption is adjusted as follows:

\begin{equation}\protect\hypertarget{eq-hec}{}{HEC = Gas_{m}*e + Solar_{Total} - c_{DHW}*N_{I}}\label{eq-hec}\end{equation}

where:

\begin{itemize}
\item
  Gas\textsubscript{m} = Total gas consumption in kWh as measured by
  provider (IWB)
\item
  Solar\textsubscript{e} = Estimated solar production in kWh
\item
  c\textsubscript{DHW} = Constant estimated factor of DWH per person and
  year (850 kWh)
\item
  N\textsubscript{I} = Number of inhabitants
\end{itemize}

By adjusting the measured gas consumption with Equation~\ref{eq-hec},
the amount of useful energy (german: Nutzenergie( is obtained. Based on
this, the heating energy consumption per square meter of area (HEPI):

\begin{equation}\protect\hypertarget{eq-hepi}{}{
\begin{align}
HEPI = \frac{HEC}{ERA}
&= \frac{HEC}{GFA*n_{floors}}
\end{align}
}\label{eq-hepi}\end{equation}

where:

\begin{itemize}
\item
  HEC = Heat energy consumption in kWh/year
\item
  ERA = Energy reference area in square meters
\item
  GFA = Gross floor area
\item
  n\textsubscript{floors} = Number of floors
\end{itemize}

As the ERA is generally not available, it is approximated on the basis
of GFA multiplied by the number of floors. Equation~\ref{eq-hepi} is
applied to all gas-heated buildings in the canton in order to calculate
average HEPI each building category (single-family house, multi-family
house) and period of construction. The following figure shows the
average HEPI for construction period for single-family houses.

The current methodology presents a clear and transparent approach for
estimating the HEC of the building sector. It offers a precise
estimation that can produce satisfactory results at the cantonal level.
However at the level of individual buildings, the estimation error may
be substantial.

The current method has several shortcomings that limit its accuracy and
applicability:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{Averaging the HEPI per construction period}: The HEPI for a
  specific building may not necessarily be representative of the typical
  HEPI value for buildings of the same construction period. This could
  introduce inaccuracies in the estimation of HEC of an individual
  building.
\item
  \textbf{Differences between municipalities:} The current method does
  not consider potential differences between municipalities that could
  influence the HEPI. However, it is possible that some municipalities
  have significantly different factors influencing their HEC, such as
  different building structures or different energy consumption
  patterns.
\item
  \textbf{Retrofitting is not taken into account}: One major limitation
  is the lack of information on the influence of retrofitting on energy
  consumption. Without this information, it is not possible to quantify
  the effect of retrofitting on energy consumption and make accurate
  predictions.
\item
  \textbf{Socio-economic factors are not considered}: Similar to
  retrofitting, socio-economic factors and the behavior of inhabitants
  are not considered explicitly in the current method. Currently, only
  the number of inhabitants registered per 31 december of the respective
  year are taken into account in order to estimate the DHW consumption.
  However, the behaviour and inhabitants as well vacancies of a building
  can have a substantial influence on HEC.
\item
  \textbf{Randomness of weather:} In the current method, patterns is
  also a challenge to integrate in the current method, which can result
  in variability in the estimated energy consumption. These limitations
  highlight the need for further research and development to improve the
  accuracy and applicability of the current method.
\end{enumerate}

Since detailed energy data at the level of individual buildings is
becoming increasingly important for energy planning at municipal or
neighborhood level, it seems crucial to provide accurate and precise
estimations.

\hypertarget{sec-research-questions--goals}{%
\section{Research questions \&
goals}\label{sec-research-questions--goals}}

On the basis of the considerations in
Section~\ref{sec-problem-definition} , we will here formulate the
research questions and also define the goals of the project from a
practical perspective.

The goal of the present master thesis is to explore and evaluate
different state-of-the-art machine learning models for estimating the
HEC of residential buildings. Thereby, we seek to present alternative
approaches to the current method as outlined in
Section~\ref{sec-problem-definition}, that can potentially deliver more
precise estimations of the HEC and address the above mentioned
shortcomings.

Thus, we here formulate the following two main research questions:

\hypertarget{list-research-question}{%
\label{list-research-question}}%
\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{\textbackslash{}begin}\NormalTok{\{}\ExtensionTok{itemize}\NormalTok{\}}
    \FunctionTok{\textbackslash{}item}\NormalTok{ RQ1: Which model or set of models can achieve the highest accuracy in estimating the heat energy consumption (HEC) of residential buildings?}
    \FunctionTok{\textbackslash{}item}\NormalTok{ RQ2: What features of the are most important for the prediction of HEC in the final model?}
\KeywordTok{\textbackslash{}end}\NormalTok{\{}\ExtensionTok{itemize}\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

By emphasizing on RQ1, we formulate the following sub questions:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{\textbackslash{}begin}\NormalTok{\{}\ExtensionTok{itemize}\NormalTok{\}}
    \FunctionTok{\textbackslash{}item}\NormalTok{ RQ1.1: Can we achieve a higher accuracy in estimating heat energy consumption (HEC) of residential buildings compared to the current approach?}
    \FunctionTok{\textbackslash{}item}\NormalTok{ RQ1.2: Can we improve the predictions through feature engineering (e.g. imputation of missing values)?}
\KeywordTok{\textbackslash{}end}\NormalTok{\{}\ExtensionTok{itemize}\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

By emphasizing on RQ2, we are specifically interested in features of the
input data that are not yet considered in the current approach. Thus, we
here formulate the following sub questions:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{\textbackslash{}begin}\NormalTok{\{}\ExtensionTok{itemize}\NormalTok{\}}
    \FunctionTok{\textbackslash{}item}\NormalTok{ RQ2.1: What importance can be attributed to retrofit features in the final model?}
    \FunctionTok{\textbackslash{}item}\NormalTok{ RQ2.2: What importance can be attributed to socio{-}economic features in the model? (if data available)}
\KeywordTok{\textbackslash{}end}\NormalTok{\{}\ExtensionTok{itemize}\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Approaches to be considered:

\begin{itemize}
\item
  MLR
\item
  SVR
\item
  RFR
\item
  ANN
\item
  AutoML
\end{itemize}

\bookmarksetup{startatroot}

\hypertarget{theoretical-background}{%
\chapter{Theoretical background}\label{theoretical-background}}

\hypertarget{energy-estimation-methods}{%
\section{Building energy estimation
methods}\label{energy-estimation-methods}}

Building energy estimation or prediction models can be defined as
physical or mathematical models that help to determine the energy use of
the building sector (Yu, Chang, \& Dong, 2022). On a global level, the
models can be divided into two sub-categories((Bourdeau, Zhai, Nefzaoui,
Guo, \& Chatellier, 2019; Deb \& Schlueter, 2021);(Yu et al., 2022)):

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Top-down approaches
\item
  Bottom-up approaches
\end{enumerate}

In the following, the two approaches will be presented. However the
emphasis will be on bottom-up approaches, since we consider bottom-up
approaches more relevant in the context of this thesis.

\hypertarget{top-down-approaches}{%
\subsection{Top-down approaches}\label{top-down-approaches}}

Top-down approaches use aggregated data on regional or national level in
order to estimate the energy use of a region or of individual buildings.
(Eymann, Rohrer, \& Stucki, 2014) use a top down approach to estimate
energy us on cantonal level derived from the national energy statistics
of Switzerland.

\hypertarget{bottom-up-approaches}{%
\subsection{Bottom-up approaches}\label{bottom-up-approaches}}

In earlier stages of building energy modelling, the research focused
mainly on physics-based or white-box models, where the models tries to
simulate the energy use of a building by the use of physical conditions
and parameters. As indicate by the name of \emph{white-box models},
these models are usually very good in terms of explainability (Yu et
al., 2022).

With the increasing availability of more and better data on energy
consumption and building characteristics, as well as machine learning
algorithms, the so-called \emph{black-box models} became more and more
popular.

In the following, we will discuss the advantages and disadvantages of
the three model types and provide examples for each of them. Further, we
will relate it to our use case as presented in the
\protect\hyperlink{problem-definition}{problem definition}

\hypertarget{white-box-models}{%
\subsection{White-box models}\label{white-box-models}}

Advantages:

\begin{itemize}
\item
  interpretability
\item
  high accuracy
\item
  universality
\item
  no requirement for historical data
\end{itemize}

Disadvantages:

\begin{itemize}
\item
  Need for detailed building information
\item
  Occupant behaviour is unknown
\item
  randomness of the weather is difficult integrate
\end{itemize}

\hypertarget{black-box-models}{%
\subsection{Black-box models}\label{black-box-models}}

Typically, there are three groups of independent variables:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Socio-economic parameters (e.g.~occupant behaviour)
\item
  Weather parameters
\item
  Building parameters
\end{enumerate}

Among the most popular black-box models are multiple linear regression
(MLR) models, support vector machines (SVM) or artificial neural
networks (ANN).

\hypertarget{grey-box-models}{%
\subsection{Grey-box models}\label{grey-box-models}}

\bookmarksetup{startatroot}

\hypertarget{sec-methodology}{%
\chapter{Methodology}\label{sec-methodology}}

In order to address the research questions defined in
\textbf{?@sec-research-questions}--goals, we first need to define a
suitable methodology. From a high-level perspective, a machine learning
workflow follows the following steps:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Problem understanding and definition
\item
  Data preparation and cleaning
\item
  Exploratory data analysis (EDA)
\item
  Data preprocessing and feature engineering
\item
  Modelling

  \begin{enumerate}
  \def\labelenumii{\arabic{enumii}.}
  \item
    Model development and training
  \item
    Model evaluation
  \end{enumerate}
\item
  Model selection and deployment
\end{enumerate}

However, the above steps are usually not carried out in a linear manner.
Usually, a first comparison evaluation of models leads to a better
understanding of the data and can provide new ideas for more feature
engineering steps. Figure~\ref{fig-modelling-process} provides a
overview of a typical modelling process.

\begin{figure}

{\centering \includegraphics{./figures/03-fig-modelling-process.png}

}

\caption{\label{fig-modelling-process}A schematic for the typical
modeling process (Silge \& Julia, n.d.).}

\end{figure}

\hypertarget{sec-data-unterstanding-and-exploration}{%
\section{Data unterstanding and
exploration}\label{sec-data-unterstanding-and-exploration}}

\hypertarget{sec-data-preprocessing}{%
\section{Data preprocessing}\label{sec-data-preprocessing}}

In order to prepare the data for modelling, we apply the following
filters:

\begin{itemize}
\tightlist
\item
  Only residential buildings (\texttt{gkat\ =\ 1020})
\item
  Only buildings with a HEPI \textgreater{} 20 kWh/m² or HEPI
  \textless300 kWh/m²
\item
  Only buildings where the gas is used for HEC or for DWH+HEC. As this
  information is absent for many buildings, we also include \texttt{NA}
  values here.
\end{itemize}

\hypertarget{modelling-strategy}{%
\section{Modelling strategy}\label{modelling-strategy}}

\begin{figure}[H]

{\centering \includegraphics[width=4.31in,height=7.64in]{./03-Methodology_files/figure-latex/mermaid-figure-1.png}

}

\end{figure}

\hypertarget{evaluation-metrics}{%
\section{Evalauation metrics}\label{evaluation-metrics}}

\bookmarksetup{startatroot}

\hypertarget{sec-results}{%
\chapter{Results}\label{sec-results}}

In this chapter, the results of our analysis will be presented. In a
first step, we will conduct a descriptive and exploratory analysis in
Section~\ref{sec-exploratory-analysis} of the data used for modelling.
In Section~\ref{sec-model-evaluation}, we will present and compare the
results of the different models. Finally in
Section~\ref{sec-final-model}, we will provide the results of the final
model and the sensitivity analysis of the input features.

\hypertarget{sec-exploratory-analysis}{%
\section{Exploratory Analysis}\label{sec-exploratory-analysis}}

To gain a first overview of the data that we use for modelling, we here
present the summary statistics and visual exploration of the data.

\hypertarget{summary-statistics}{%
\subsection{Summary statistics}\label{summary-statistics}}

As outlined in Section~\ref{sec-data-preprocessing}, we applied several
filters to the initial raw data. Thus, the final dataset for modelling
contains 52217 observations (buildings). As we consider data from the
years 2016, 2018 and 2020, one building can be present in the dataset
three times at maximum. Table~\ref{tbl-obs-per-year} shows that the
number of gas-heated buildings is slightly decreasing between 2016 and
2020. Also, we observe a decrease of the mean HEPI and the total HEC
between 2016 and 2020.

\hypertarget{tbl-obs-per-year}{}
\begin{longtable}[]{@{}lrrr@{}}
\caption{\label{tbl-obs-per-year}Number of buildings per survey
year.}\tabularnewline
\toprule()
Survey Year & Count & Mean HEPI (kWh/m2/year) & Sum HEC (GWh/year) \\
\midrule()
\endfirsthead
\toprule()
Survey Year & Count & Mean HEPI (kWh/m2/year) & Sum HEC (GWh/year) \\
\midrule()
\endhead
2016 & 17769 & 91.3 & 502.7 \\
2018 & 17308 & 87.0 & 459.5 \\
2020 & 17140 & 80.1 & 432.5 \\
\bottomrule()
\end{longtable}

\begin{verbatim}
#> `summarise()` has grouped output by 'Survey Year'. You can override using the
#> `.groups` argument.
\end{verbatim}

\hypertarget{tbl-obs-per-year-municipality}{}
\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1622}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1757}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.0811}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.3243}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2568}}@{}}
\caption{\label{tbl-obs-per-year-municipality}Mean HEPI and sum HEC per
survey year and municipality.}\tabularnewline
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Survey Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Municipality
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
Count
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
Mean HEPI (kWh/m2/year)
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
Sum HEC (GWh/year)
\end{minipage} \\
\midrule()
\endfirsthead
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
Survey Year
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Municipality
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
Count
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
Mean HEPI (kWh/m2/year)
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
Sum HEC (GWh/year)
\end{minipage} \\
\midrule()
\endhead
2016 & Aesch BL & 888 & 89.7 & 27.5 \\
2016 & Allschwil & 1770 & 96.1 & 56.8 \\
2016 & Arlesheim & 823 & 99.2 & 31.4 \\
2016 & Augst BL & 66 & 83.0 & 2.0 \\
2016 & Binningen & 1358 & 98.5 & 49.1 \\
2016 & Birsfelden & 541 & 92.1 & 16.4 \\
2016 & Bottmingen & 738 & 94.4 & 20.9 \\
2016 & Ettingen & 489 & 87.5 & 13.8 \\
2016 & Frenkendorf & 539 & 81.8 & 14.1 \\
2016 & Füllinsdorf & 435 & 86.5 & 11.9 \\
2016 & Lausen & 636 & 87.5 & 12.9 \\
2016 & Liestal & 915 & 83.2 & 25.5 \\
2016 & Münchenstein & 1359 & 97.3 & 34.1 \\
2016 & Muttenz & 1752 & 89.6 & 46.1 \\
2016 & Oberwil BL & 1097 & 89.8 & 32.2 \\
2016 & Pfeffingen & 273 & 84.3 & 5.9 \\
2016 & Pratteln & 1024 & 94.5 & 30.7 \\
2016 & Reinach BL & 1812 & 93.3 & 46.0 \\
2016 & Schönenbuch & 248 & 81.0 & 4.1 \\
2016 & Therwil & 1006 & 79.5 & 21.3 \\
2018 & Aesch BL & 277 & 81.8 & 11.3 \\
2018 & Allschwil & 1815 & 92.1 & 57.4 \\
2018 & Arlesheim & 835 & 93.9 & 29.3 \\
2018 & Augst BL & 66 & 84.7 & 2.3 \\
2018 & Binningen & 1309 & 93.1 & 43.2 \\
2018 & Birsfelden & 548 & 85.6 & 15.7 \\
2018 & Bottmingen & 734 & 89.1 & 19.6 \\
2018 & Ettingen & 482 & 82.4 & 10.4 \\
2018 & Frenkendorf & 551 & 78.3 & 13.8 \\
2018 & Füllinsdorf & 452 & 81.5 & 11.4 \\
2018 & Lausen & 632 & 84.1 & 12.4 \\
2018 & Liestal & 923 & 79.4 & 23.9 \\
2018 & Münchenstein & 1395 & 90.9 & 33.0 \\
2018 & Muttenz & 1762 & 86.1 & 43.5 \\
2018 & Oberwil BL & 1097 & 87.2 & 31.1 \\
2018 & Pfeffingen & 270 & 81.8 & 5.6 \\
2018 & Pratteln & 1041 & 90.0 & 28.7 \\
2018 & Reinach BL & 1851 & 88.7 & 42.3 \\
2018 & Schönenbuch & 244 & 79.1 & 3.9 \\
2018 & Therwil & 1024 & 75.8 & 20.7 \\
2020 & Aesch BL & 316 & 76.8 & 12.8 \\
2020 & Allschwil & 1809 & 85.0 & 52.2 \\
2020 & Arlesheim & 840 & 86.9 & 28.6 \\
2020 & Augst BL & 68 & 78.6 & 2.4 \\
2020 & Binningen & 1351 & 85.9 & 41.9 \\
2020 & Birsfelden & 549 & 80.9 & 14.8 \\
2020 & Bottmingen & 748 & 78.8 & 18.2 \\
2020 & Ettingen & 497 & 76.1 & 12.5 \\
2020 & Frenkendorf & 553 & 72.8 & 13.2 \\
2020 & Füllinsdorf & 455 & 74.9 & 10.5 \\
2020 & Lausen & 639 & 72.3 & 11.0 \\
2020 & Liestal & 908 & 72.3 & 22.5 \\
2020 & Münchenstein & 1401 & 85.4 & 31.6 \\
2020 & Muttenz & 1748 & 79.4 & 42.3 \\
2020 & Oberwil BL & 1093 & 79.2 & 28.5 \\
2020 & Pfeffingen & 76 & 79.2 & 1.6 \\
2020 & Pratteln & 1034 & 81.5 & 25.4 \\
2020 & Reinach BL & 1847 & 81.7 & 40.2 \\
2020 & Schönenbuch & 177 & 73.4 & 2.7 \\
2020 & Therwil & 1031 & 71.3 & 19.8 \\
\bottomrule()
\end{longtable}

\textbf{Variable type: numeric}

\hypertarget{tbl-summary-stats}{}
\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 20\tabcolsep) * \real{0.2128}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 20\tabcolsep) * \real{0.0709}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 20\tabcolsep) * \real{0.0993}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 20\tabcolsep) * \real{0.0851}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 20\tabcolsep) * \real{0.0851}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 20\tabcolsep) * \real{0.0780}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 20\tabcolsep) * \real{0.0780}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 20\tabcolsep) * \real{0.0780}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 20\tabcolsep) * \real{0.0780}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 20\tabcolsep) * \real{0.0922}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 20\tabcolsep) * \real{0.0426}}@{}}
\caption{\label{tbl-summary-stats}Summary statistics of modelling input
data.}\tabularnewline
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
skim\_variable
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
n\_missing
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
complete\_rate
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
mean
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
sd
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
p0
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
p25
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
p50
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
p75
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
p100
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
hist
\end{minipage} \\
\midrule()
\endfirsthead
\toprule()
\begin{minipage}[b]{\linewidth}\raggedright
skim\_variable
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
n\_missing
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
complete\_rate
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
mean
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
sd
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
p0
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
p25
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
p50
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
p75
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
p100
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
hist
\end{minipage} \\
\midrule()
\endhead
egid & 0 & 1.00 & 33935746.86 & 83711834.90 & 390001.00 & 401244.00 &
411462.00 & 2348077.00 & 245068499.00 & ▇▁▁▁▁ \\
energy\_consumed\_measured\_mwh & 0 & 1.00 & 32.80 & 65.27 & 0.28 &
14.80 & 20.58 & 30.60 & 3971.41 & ▇▁▁▁▁ \\
energy\_consumed\_estimated\_mwh & 0 & 1.00 & 28.58 & 32.35 & -9.38 &
14.52 & 19.65 & 29.08 & 1087.27 & ▇▁▁▁▁ \\
num\_residents & 1254 & 0.98 & 4.08 & 5.05 & 1.00 & 2.00 & 3.00 & 4.00 &
167.00 & ▇▁▁▁▁ \\
heating\_coefficient\_measured & 136 & 1.00 & 84.97 & 43.20 & -17.35 &
54.96 & 77.26 & 106.64 & 414.81 & ▆▇▁▁▁ \\
heating\_coefficient\_estimated & 0 & 1.00 & 79.15 & 13.83 & 42.99 &
66.36 & 84.02 & 89.63 & 98.04 & ▁▅▃▇▇ \\
gross\_floor\_area\_m2 & 0 & 1.00 & 303.01 & 331.58 & 35.00 & 152.00 &
206.53 & 303.00 & 10315.00 & ▇▁▁▁▁ \\
heated\_area\_m2 & 0 & 1.00 & 335.50 & 685.12 & 35.00 & 152.01 & 207.00
& 304.39 & 44501.99 & ▇▁▁▁▁ \\
year\_of\_installation & 8343 & 0.84 & 2001.13 & 68.71 & 0.00 & 1999.00
& 2005.00 & 2010.00 & 2020.00 & ▁▁▁▁▇ \\
efficiency\_of\_installation & 0 & 1.00 & 0.91 & 0.05 & 0.85 & 0.85 &
0.95 & 0.95 & 0.95 & ▆▁▁▁▇ \\
energy\_consumed\_hot\_water\_kwh & 0 & 1.00 & 3387.48 & 4276.69 & 0.00
& 1700.00 & 2550.00 & 3400.00 & 141950.00 & ▇▁▁▁▁ \\
energy\_production\_solar\_kwh & 47451 & 0.09 & 3924.59 & 3841.62 &
520.00 & 2392.00 & 2600.00 & 3744.00 & 48880.00 & ▇▁▁▁▁ \\
solar\_system\_area\_m2 & 0 & 1.00 & 0.74 & 3.27 & 0.00 & 0.00 & 0.00 &
0.00 & 94.00 & ▇▁▁▁▁ \\
photovoltaic\_system\_power\_kw & 0 & 1.00 & 0.23 & 1.53 & 0.00 & 0.00 &
0.00 & 0.00 & 58.80 & ▇▁▁▁▁ \\
heated\_by\_egid & 51441 & 0.01 & 35993166.04 & 85918658.89 & 390032.00
& 396024.00 & 410104.00 & 905303.75 & 245064842.00 & ▇▁▁▁▂ \\
construction\_year & 0 & 1.00 & 1963.29 & 43.38 & 1582.00 & 1948.00 &
1974.00 & 1990.00 & 2020.00 & ▁▁▁▂▇ \\
demolition\_year & 52019 & 0.00 & 2019.94 & 1.42 & 2017.00 & 2019.00 &
2020.00 & 2021.00 & 2022.00 & ▅▃▇▇▃ \\
building\_area\_m2 & 0 & 1.00 & 107.89 & 72.76 & 23.34 & 64.52 & 84.52 &
121.20 & 3683.88 & ▇▁▁▁▁ \\
building\_volume\_m3 & 52149 & 0.00 & 1172.93 & 600.05 & 400.00 & 764.00
& 1017.00 & 1245.75 & 2550.00 & ▅▇▁▁▂ \\
energy\_reference\_area & 52145 & 0.00 & 378.40 & 295.93 & 27.00 &
188.00 & 268.00 & 506.25 & 1434.00 & ▇▅▂▁▁ \\
coordinate\_e & 0 & 1.00 & 2613278.96 & 4868.15 & 2604529.41 &
2609281.81 & 2612124.15 & 2615371.16 & 2625155.28 & ▃▇▅▂▂ \\
coordinate\_n & 0 & 1.00 & 1262643.64 & 2654.40 & 1256166.91 &
1260722.93 & 1262809.49 & 1264516.73 & 1267875.27 & ▂▅▇▇▅ \\
num\_floors & 0 & 1.00 & 2.62 & 0.86 & 1.00 & 2.00 & 3.00 & 3.00 & 16.00
& ▇▁▁▁▁ \\
num\_separate\_living\_space & 45653 & 0.13 & 0.43 & 1.24 & 0.00 & 0.00
& 0.00 & 0.00 & 25.00 & ▇▁▁▁▁ \\
num\_dwellings & 0 & 1.00 & 1.88 & 2.70 & 0.00 & 1.00 & 1.00 & 1.00 &
76.00 & ▇▁▁▁▁ \\
meters\_above\_sealevel & 0 & 1.00 & 311.78 & 30.45 & 251.60 & 289.30 &
305.40 & 330.50 & 446.10 & ▅▇▃▁▁ \\
entrance\_postal\_code & 0 & 1.00 & 4168.89 & 101.83 & 4102.00 & 4107.00
& 4132.00 & 4153.00 & 4415.00 & ▇▁▁▁▂ \\
entrance\_postal\_code\_add & 0 & 1.00 & 0.00 & 0.00 & 0.00 & 0.00 &
0.00 & 0.00 & 0.00 & ▁▁▇▁▁ \\
hdd & 0 & 1.00 & 2720.12 & 223.11 & 2507.20 & 2507.20 & 2618.70 &
3024.30 & 3024.30 & ▇▇▁▁▇ \\
adt & 17769 & 0.66 & 1115.31 & 64.00 & 1051.00 & 1051.00 & 1179.00 &
1179.00 & 1179.00 & ▇▁▁▁▇ \\
energy\_production\_solar\_mwh & 0 & 1.00 & 0.36 & 1.62 & 0.00 & 0.00 &
0.00 & 0.00 & 48.88 & ▇▁▁▁▁ \\
energy\_consumed\_hot\_water\_mwh & 0 & 1.00 & 3.39 & 4.28 & 0.00 & 1.70
& 2.55 & 3.40 & 141.95 & ▇▁▁▁▁ \\
hec & 0 & 1.00 & 26.71 & 55.59 & 1.37 & 11.45 & 16.70 & 25.57 & 3601.23
& ▇▁▁▁▁ \\
hepi & 0 & 1.00 & 86.19 & 42.51 & 20.01 & 55.66 & 78.07 & 107.53 &
299.95 & ▇▆▂▁▁ \\
retrofit\_investment\_costs & 0 & 1.00 & 569.04 & 11587.64 & 0.00 & 0.00
& 0.00 & 0.00 & 1751595.00 & ▇▁▁▁▁ \\
retrofit\_year\_completion & 46408 & 0.11 & 2012.94 & 2.60 & 2009.00 &
2011.00 & 2012.00 & 2015.00 & 2019.00 & ▇▅▅▂▁ \\
\bottomrule()
\end{longtable}

\hypertarget{retrofitting}{%
\subsection{Retrofitting}\label{retrofitting}}

\begin{table}

\caption{\textbf{?(caption)}}\begin{minipage}[t]{\linewidth}

{\centering 

\begin{verbatim}
#> `summarise()` has grouped output by 'survey_year', 'building_class'. You can
#> override using the `.groups` argument.
#> # A tibble: 18 x 4
#> # Groups:   survey_year, building_class [9]
#>    survey_year building_class retrofitted `Mean HEPI`
#>    <fct>       <fct>          <lgl>             <dbl>
#>  1 2016        1110           FALSE              92.3
#>  2 2016        1110           TRUE               88.3
#>  3 2016        1121           FALSE              88.2
#>  4 2016        1121           TRUE               81.4
#>  5 2016        1122           FALSE              90.0
#>  6 2016        1122           TRUE               83.3
#>  7 2018        1110           FALSE              88.3
#>  8 2018        1110           TRUE               84.6
#>  9 2018        1121           FALSE              83.8
#> 10 2018        1121           TRUE               72.9
#> 11 2018        1122           FALSE              84.5
#> 12 2018        1122           TRUE               76.1
#> 13 2020        1110           FALSE              81.3
#> 14 2020        1110           TRUE               78.2
#> 15 2020        1121           FALSE              77.3
#> 16 2020        1121           TRUE               69.5
#> 17 2020        1122           FALSE              78.1
#> 18 2020        1122           TRUE               70.6
\end{verbatim}

}

\end{minipage}%

\end{table}

\begin{figure}

{\centering \includegraphics{./04-Results_files/figure-pdf/fig-retrofitting-investment-costs-1.pdf}

}

\caption{\label{fig-retrofitting-investment-costs}Correlation between
retrofit investment costs and HEPI}

\end{figure}

\begin{verbatim}
#> Warning: Removed 890 rows containing missing values (`geom_point()`).
\end{verbatim}

\begin{figure}

{\centering \includegraphics{./04-Results_files/figure-pdf/fig-retrofitting-1.pdf}

}

\caption{\label{fig-retrofitting}Construction year per municipality}

\end{figure}

\hypertarget{density-and-boxplots}{%
\subsection{Density and boxplots}\label{density-and-boxplots}}

\begin{table}

\caption{\textbf{?(caption)}}\begin{minipage}[t]{\linewidth}

{\centering 

\begin{verbatim}
#> `summarise()` has grouped output by 'entrance_municipality_name'. You can
#> override using the `.groups` argument.
#> # A tibble: 20 x 4
#> # Groups:   entrance_municipality_name [20]
#>    entrance_municipality_name `1110` `1121` `1122`
#>    <chr>                       <int>  <int>  <int>
#>  1 Aesch BL                     1140     68    273
#>  2 Allschwil                    3926    285   1183
#>  3 Arlesheim                    1808    252    438
#>  4 Augst BL                      143     33     24
#>  5 Binningen                    2861    261    896
#>  6 Birsfelden                    771    334    533
#>  7 Bottmingen                   1782    110    328
#>  8 Ettingen                     1232     36    200
#>  9 Frenkendorf                  1283     87    273
#> 10 Füllinsdorf                  1126     67    149
#> 11 Lausen                       1648    138    121
#> 12 Liestal                      2151    209    386
#> 13 Münchenstein                 3437    179    539
#> 14 Muttenz                      4340    324    598
#> 15 Oberwil BL                   2649    103    535
#> 16 Pfeffingen                    577     20     22
#> 17 Pratteln                     2516    188    395
#> 18 Reinach BL                   4745     93    672
#> 19 Schönenbuch                   635      9     25
#> 20 Therwil                      2696     53    312
\end{verbatim}

}

\end{minipage}%

\end{table}

\begin{figure}

{\centering 

}

\caption{\label{fig-municipality-construction-year}Construction year per
municipality}

\end{figure}

\hypertarget{ridgeline-plots}{%
\subsection{Ridgeline plots}\label{ridgeline-plots}}

\begin{verbatim}
#> Picking joint bandwidth of 7.73
\end{verbatim}

\includegraphics{./04-Results_files/figure-pdf/unnamed-chunk-13-1.pdf}

\hypertarget{modelling}{%
\section{Modelling}\label{modelling}}

\hypertarget{traintest-split}{%
\subsection{Train/test split}\label{traintest-split}}

\hypertarget{preprocessing}{%
\subsection{Preprocessing}\label{preprocessing}}

In the preprocessing, we apply the following:

\begin{itemize}
\tightlist
\item
  Remove multicollinearity: Predictor variables that have a correlation
  above +/- 0.8 will me removed
\item
  Normalize numeric variables
\item
  Log-transform numeric variables
\item
  Create dummy variables from all nominal variables
\end{itemize}

\hypertarget{defining-models}{%
\subsection{Defining models}\label{defining-models}}

\hypertarget{define-workflows}{%
\subsection{Define workflows}\label{define-workflows}}

\hypertarget{training}{%
\subsection{Training}\label{training}}

\hypertarget{sec-model-evaluation}{%
\subsection{Model evaluation}\label{sec-model-evaluation}}

\begin{figure}

{\centering \includegraphics{./04-Results_files/figure-pdf/fig-model-benchmarking-1.pdf}

}

\caption{\label{fig-model-benchmarking}Benchmarking of models}

\end{figure}

\begin{verbatim}
#> # A tibble: 24 x 9
#>    wflow_id .config             .metric   mean std_err     n prepr~1 model  rank
#>    <chr>    <chr>               <chr>    <dbl>   <dbl> <int> <chr>   <chr> <int>
#>  1 log_rf   Preprocessor1_Mode~ mae      0.262 6.29e-4     2 recipe  rand~     1
#>  2 log_rf   Preprocessor1_Mode~ mape    10.0   2.08e-2     2 recipe  rand~     1
#>  3 log_rf   Preprocessor1_Mode~ rmse     0.347 5.46e-4     2 recipe  rand~     1
#>  4 log_rf   Preprocessor1_Mode~ rsq      0.781 1.78e-3     2 recipe  rand~     1
#>  5 log_dt   Preprocessor1_Mode~ mae      0.344 3.04e-4     2 recipe  deci~     2
#>  6 log_dt   Preprocessor1_Mode~ mape    13.0   2.72e-2     2 recipe  deci~     2
#>  7 log_dt   Preprocessor1_Mode~ rmse     0.441 1.17e-3     2 recipe  deci~     2
#>  8 log_dt   Preprocessor1_Mode~ rsq      0.642 2.32e-3     2 recipe  deci~     2
#>  9 log_lm   Preprocessor1_Mode~ mae      0.350 6.60e-5     2 recipe  line~     3
#> 10 log_lm   Preprocessor1_Mode~ mape    13.2   4.12e-2     2 recipe  line~     3
#> # ... with 14 more rows, and abbreviated variable name 1: preprocessor
\end{verbatim}

\hypertarget{sec-final-model}{%
\subsection{Final model}\label{sec-final-model}}

\begin{verbatim}
#> # A tibble: 1 x 1
#>   .config             
#>   <chr>               
#> 1 Preprocessor1_Model1
#> # A tibble: 2 x 4
#>   .metric .estimator .estimate .config             
#>   <chr>   <chr>          <dbl> <chr>               
#> 1 rmse    standard       0.320 Preprocessor1_Model1
#> 2 rsq     standard       0.814 Preprocessor1_Model1
\end{verbatim}

\hypertarget{multiple-linear-regression}{%
\subsection{Multiple linear
regression}\label{multiple-linear-regression}}

\hypertarget{ann}{%
\subsection{ANN}\label{ann}}

\hypertarget{auto-ml}{%
\subsection{Auto ML}\label{auto-ml}}

\bookmarksetup{startatroot}

\hypertarget{section}{%
\chapter{}\label{section}}

\bookmarksetup{startatroot}

\hypertarget{bibliography}{%
\chapter*{Bibliography}\label{bibliography}}
\addcontentsline{toc}{chapter}{Bibliography}

\markboth{Bibliography}{Bibliography}

\hypertarget{refs}{}
\begin{CSLReferences}{1}{0}
\leavevmode\vadjust pre{\hypertarget{ref-2050ind}{}}%
2050 indicative target. (n.d.). Retrieved from
\url{https://www.bafu.admin.ch/bafu/en/home/topics/climate/info-specialists/emission-reduction/reduction-targets/2050-target.html}

\leavevmode\vadjust pre{\hypertarget{ref-bourdeau2019}{}}%
Bourdeau, M., Zhai, X. qiang, Nefzaoui, E., Guo, X., \& Chatellier, P.
(2019). Modeling and forecasting building energy consumption: A review
of data-driven techniques. \emph{Sustainable Cities and Society},
\emph{48}, 101533.
http://doi.org/\href{https://doi.org/10.1016/j.scs.2019.101533}{10.1016/j.scs.2019.101533}

\leavevmode\vadjust pre{\hypertarget{ref-deb2021}{}}%
Deb, C., \& Schlueter, A. (2021). Review of data-driven energy modelling
techniques for building retrofit. \emph{Renewable and Sustainable Energy
Reviews}, \emph{144}, 110990.
http://doi.org/\href{https://doi.org/10.1016/j.rser.2021.110990}{10.1016/j.rser.2021.110990}

\leavevmode\vadjust pre{\hypertarget{ref-eymann2014}{}}%
Eymann, L., Rohrer, J., \& Stucki, M. (2014). Energieverbrauch der
Schweizer Kantone : Endenergieverbrauch und Mittelabfluss durch den
Energie-Import.
http://doi.org/\href{https://doi.org/10.21256/zhaw-124}{10.21256/zhaw-124}

\leavevmode\vadjust pre{\hypertarget{ref-landratdeskantonsbasel-landschaft}{}}%
Landrat des Kantons Basel-Landschaft. (n.d.). Energiegesetz (EnG BL).
Retrieved from \url{https://bl.clex.ch/app/de/texts_of_law/490/art/2}

\leavevmode\vadjust pre{\hypertarget{ref-nordwestschweizerregierungskonferenz2021}{}}%
Nordwestschweizer Regierungskonferenz. (2021). \emph{Klima-Charta der
Nordwestschweizer Regierungskonferenz} (p. 5). Retrieved from
\url{https://www.baselland.ch/politik-und-behorden/direktionen/bau-und-umweltschutzdirektion/umweltschutz-energie/klima-1/klima-charta-der-nordwestschweizer-regierungskonferenz}

\leavevmode\vadjust pre{\hypertarget{ref-regierungsratdeskantonsbasel-landschaft}{}}%
Regierungsrat des Kantons Basel-Landschaft. (n.d.). \emph{Vorlage an den
Landrat: Änderung des kantonalen Energiegesetzes und des zugehörigen
Dekrets aufgrund des Energieplanungsberichts 2022} (p. 47). Retrieved
from
\url{https://baselland.talus.ch/de/dokumente/geschaeft/0c4e9a4dc0c84cf783377aa2b4e46bcc-332}

\leavevmode\vadjust pre{\hypertarget{ref-regierungsratdeskantonsbasel-landschaft2022}{}}%
Regierungsrat des Kantons Basel-Landschaft. (2022). \emph{Bericht zum
Stand der Energiepolitik des Kantons Basel-Landschaft im Jahr 2022} (p.
49).

\leavevmode\vadjust pre{\hypertarget{ref-silge}{}}%
Silge, M. K., \& Julia. (n.d.). \emph{Tidy modeling with r}. Retrieved
from \url{https://www.tmwr.org/}

\leavevmode\vadjust pre{\hypertarget{ref-statistischesamtdeskantonsbasel-landschaft2022}{}}%
Statistisches Amt des Kantons Basel-Landschaft. (2022, June 29).
Webartikel: Energiestatistik 2020. Retrieved from
\url{https://www.baselland.ch/politik-und-behorden/direktionen/finanz-und-kirchendirektion/statistisches-amt/publikationen/energie/webartikel_vom_29-06-2022_energiestatistik_2020}

\leavevmode\vadjust pre{\hypertarget{ref-statistischesamtdeskantonsbasel-stadt2022}{}}%
Statistisches Amt des Kantons Basel-Stadt. (2022). \emph{Methodenbericht
- Energiestatistik Basel-Stadt.} (p. 12). Basel. Retrieved from
\url{https://www.statistik.bs.ch/dam/jcr:51d6273d-0c4c-40f9-9941-beb834331e45/Methodikbericht-Energiestatistik.pdf}

\leavevmode\vadjust pre{\hypertarget{ref-yu2022}{}}%
Yu, J., Chang, W.-S., \& Dong, Y. (2022). Building Energy Prediction
Models and Related Uncertainties: A Review. \emph{Buildings},
\emph{12}(8), 1284.
http://doi.org/\href{https://doi.org/10.3390/buildings12081284}{10.3390/buildings12081284}

\end{CSLReferences}

\appendix
\addcontentsline{toc}{part}{Appendices}

\hypertarget{appendix}{%
\chapter{Appendix}\label{appendix}}

\hypertarget{retrofit-analysis}{%
\section{Retrofit analysis}\label{retrofit-analysis}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\CommentTok{\#\textgreater{} {-}{-} Attaching packages {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-} tidyverse 1.3.2 {-}{-}}
\CommentTok{\#\textgreater{} v ggplot2 3.4.0      v purrr   1.0.0 }
\CommentTok{\#\textgreater{} v tibble  3.1.8      v dplyr   1.0.10}
\CommentTok{\#\textgreater{} v tidyr   1.2.1      v stringr 1.5.0 }
\CommentTok{\#\textgreater{} v readr   2.1.3      v forcats 0.5.2 }
\CommentTok{\#\textgreater{} {-}{-} Conflicts {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-} tidyverse\_conflicts() {-}{-}}
\CommentTok{\#\textgreater{} x dplyr::filter() masks stats::filter()}
\CommentTok{\#\textgreater{} x dplyr::lag()    masks stats::lag()}

\NormalTok{retrofit\_m01 }\OtherTok{\textless{}{-}} \FunctionTok{read\_delim}\NormalTok{(}\StringTok{"data/sanierungen\_typ\_M01.csv"}\NormalTok{, }\AttributeTok{delim =} \StringTok{","}\NormalTok{, }\AttributeTok{show\_col\_types =} \ConstantTok{FALSE}\NormalTok{)}

\NormalTok{cleaning\_retrofit }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(df)\{}
\NormalTok{  df }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{rename\_all}\NormalTok{(}\SpecialCharTok{\textasciitilde{}} \FunctionTok{gsub}\NormalTok{(}\StringTok{" "}\NormalTok{, }\StringTok{"\_"}\NormalTok{, .))}
\NormalTok{\}}


\NormalTok{retrofit\_m01\_clean }\OtherTok{\textless{}{-}} \FunctionTok{cleaning\_retrofit}\NormalTok{(retrofit\_m01)}
\end{Highlighting}
\end{Shaded}

\hypertarget{details-on-model-comparison}{%
\section{Details on model
comparison}\label{details-on-model-comparison}}

\hypertarget{classification-of-energy-source}{%
\section{Classification of energy
source}\label{classification-of-energy-source}}

\begin{verbatim}
#> -- Attaching packages -------------------------------------- tidymodels 1.0.0 --
#> v broom        1.0.2     v rsample      1.1.1
#> v dials        1.1.0     v tune         1.0.1
#> v infer        1.0.4     v workflows    1.1.2
#> v modeldata    1.0.1     v workflowsets 1.0.0
#> v parsnip      1.0.3     v yardstick    1.1.0
#> v recipes      1.0.3
#> -- Conflicts ----------------------------------------- tidymodels_conflicts() --
#> x scales::discard() masks purrr::discard()
#> x dplyr::filter()   masks stats::filter()
#> x recipes::fixed()  masks stringr::fixed()
#> x dplyr::lag()      masks stats::lag()
#> x yardstick::spec() masks readr::spec()
#> x recipes::step()   masks stats::step()
#> * Use suppressPackageStartupMessages() to eliminate package startup messages
\end{verbatim}

\begin{verbatim}
#> [1] 188130
#> [1] 62712
\end{verbatim}

\begin{verbatim}
#> parsnip model object
#> 
#> Call:
#> nnet::multinom(formula = energy_source_heat_1 ~ gkat + gklas + 
#>     gbauj + coordinate_e + coordinate_n, data = data, trace = FALSE)
#> 
#> Coefficients:
#>        (Intercept)        gkat       gklas         gbauj  coordinate_e
#> 7501 -6.835172e-06 -0.06563896 -0.02745384  0.0028728087  3.799159e-05
#> 7510 -3.497843e-05 -0.12423699 -0.04016692  0.0171859254  6.291162e-05
#> 7511 -8.483274e-06 -0.07364070 -0.02339913  0.0014657548 -7.727852e-05
#> 7520 -8.203960e-04 -0.15228200 -0.01949531 -0.0123686417 -1.907601e-05
#> 7530  1.390665e-03 -0.12999278 -0.02213160  0.0032962420  3.481816e-05
#> 7540  7.537809e-05 -0.08082458 -0.04218187 -0.0159937454  8.997174e-05
#> 7541 -1.626029e-07 -0.03126010 -0.03861306 -0.0044041756 -1.784022e-04
#> 7542 -2.347355e-07 -0.06315306 -0.02663984 -0.0019726150  3.345846e-05
#> 7543 -3.967145e-06 -0.05094384 -0.02787704  0.0020189175  8.533154e-05
#> 7550  3.215375e-06 -0.04295196 -0.03329127 -0.0024257173  5.806647e-05
#> 7560  2.493747e-05 -0.12985863 -0.02352268 -0.0082392432  8.164706e-05
#> 7570 -5.387196e-06 -0.06245514 -0.02217894  0.0023908961  1.398160e-04
#> 7580 -4.642201e-04 -0.16759894 -0.02111231 -0.0043371735  4.267704e-05
#> 7598 -6.730330e-07 -0.06422385 -0.02160730 -0.0008697055 -2.022897e-05
#> 7599 -1.724552e-05 -0.08031039 -0.02802326  0.0021631243  9.308439e-06
#>       coordinate_n
#> 7501 -3.616179e-06
#> 7510 -1.675555e-05
#> 7511  2.401254e-04
#> 7520  2.049221e-04
#> 7530  5.283650e-05
#> 7540 -5.599823e-05
#> 7541  4.369104e-04
#> 7542  1.008723e-05
#> 7543 -1.130944e-04
#> 7550 -5.165719e-05
#> 7560 -2.743996e-05
#> 7570 -2.235117e-04
#> 7580  7.711241e-05
#> 7598  1.160595e-04
#> 7599  7.008865e-05
#> 
#> Residual Deviance: 491780.5 
#> AIC: 491960.5
\end{verbatim}

\begin{verbatim}
#> # A tibble: 62,712 x 18
#>    energy_sour~1 .pred~2 .pred~3 .pred~4 .pred~5 .pred~6 .pred~7 .pred~8 .pred~9
#>    <fct>         <fct>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
#>  1 7520          7530    3.76e-4 0.00731   0.152 0.00368   0.313   0.361  0.0137
#>  2 7520          7530    3.76e-4 0.00731   0.152 0.00368   0.313   0.361  0.0137
#>  3 7520          7530    3.75e-4 0.00726   0.149 0.00369   0.318   0.359  0.0139
#>  4 7520          7530    3.75e-4 0.00725   0.148 0.00370   0.318   0.359  0.0139
#>  5 7520          7530    3.76e-4 0.00730   0.151 0.00370   0.314   0.361  0.0137
#>  6 7520          7530    3.75e-4 0.00725   0.148 0.00371   0.318   0.359  0.0138
#>  7 7520          7530    3.74e-4 0.00724   0.148 0.00371   0.319   0.359  0.0138
#>  8 7520          7530    3.74e-4 0.00724   0.148 0.00373   0.319   0.358  0.0138
#>  9 7520          7530    3.76e-4 0.00726   0.148 0.00371   0.318   0.359  0.0138
#> 10 7520          7530    3.76e-4 0.00726   0.148 0.00371   0.318   0.359  0.0138
#> # ... with 62,702 more rows, 9 more variables: .pred_7541 <dbl>,
#> #   .pred_7542 <dbl>, .pred_7543 <dbl>, .pred_7550 <dbl>, .pred_7560 <dbl>,
#> #   .pred_7570 <dbl>, .pred_7580 <dbl>, .pred_7598 <dbl>, .pred_7599 <dbl>, and
#> #   abbreviated variable names 1: energy_source_heat_1, 2: .pred_class,
#> #   3: .pred_7500, 4: .pred_7501, 5: .pred_7510, 6: .pred_7511, 7: .pred_7520,
#> #   8: .pred_7530, 9: .pred_7540
\end{verbatim}

\begin{verbatim}
#> Warning: While computing multiclass `sens()`, some levels had no true events (i.e. `true_positive + false_negative = 0`). 
#> Sensitivity is undefined in this case, and those levels will be removed from the averaged result.
#> Note that the following number of predicted events actually occured for each problematic event level:
#> '7550': 0
#> # A tibble: 3 x 3
#>   .metric  .estimator .estimate
#>   <chr>    <chr>          <dbl>
#> 1 accuracy multiclass     0.518
#> 2 sens     macro          0.173
#> 3 spec     macro          0.959
#>           Truth
#> Prediction  7500  7501  7510  7511  7520  7530  7540  7541  7542  7543  7550
#>       7500  8687     7   187     0   619   789   207     0     1     0     0
#>       7501     0     0     0     0     0     0     0     0     0     0     0
#>       7510     0    37  1525    10    28  1016   237     0     0     6     0
#>       7511     0     0     0     0     0     0     0     0     0     0     0
#>       7520    81    17  1422    12 12512  7927   809     0     2     1     0
#>       7530    20    58  3395    21  3932  7929   918     2     1     0     0
#>       7540    10     3   162     1    10   676   582     2     3     0     0
#>       7541     0     0     0     0     0     0     0     0     0     0     0
#>       7542     0     0     0     0     0     0     0     0     0     0     0
#>       7543     0     0     0     0     0     0     0     0     0     0     0
#>       7550     0     0     0     0     0     0     0     0     0     0     0
#>       7560     1     0     0     0     0     1     0     0     0     0     0
#>       7570     3     0     0     0     0     2     4     0     0     0     0
#>       7580     0     0     0     0     0     0     0     0     0     0     0
#>       7598     0     0     0     0     0     0     0     0     0     0     0
#>       7599     0     0     0     0     0     0     0     0     0     0     0
#>           Truth
#> Prediction  7560  7570  7580  7598  7599
#>       7500   206     0   570     3    28
#>       7501     0     0     0     0     0
#>       7510   107     0   269     0     1
#>       7511     0     0     0     0     0
#>       7520   514     1  1817     0    49
#>       7530   809     0  1588     2    14
#>       7540   167     0   249     0     1
#>       7541     0     0     0     0     0
#>       7542     0     0     0     0     0
#>       7543     0     0     0     0     0
#>       7550     0     0     0     0     0
#>       7560     0     0     1     0     0
#>       7570     0     0     0     0     0
#>       7580     0     0     0     0     0
#>       7598     0     0     0     0     0
#>       7599     0     0     0     0     0
\end{verbatim}

\includegraphics{./05-appendix_files/figure-pdf/unnamed-chunk-7-1.pdf}

\includegraphics{./05-appendix_files/figure-pdf/unnamed-chunk-7-2.pdf}

\begin{verbatim}
#> ! train/test split: internal:
#>   No observations were detected in `truth` for level(s): '7550'
#>   Computation will proceed by ignoring those levels.
#> # A tibble: 2 x 4
#>   .metric  .estimator .estimate .config             
#>   <chr>    <chr>          <dbl> <chr>               
#> 1 accuracy multiclass     0.518 Preprocessor1_Model1
#> 2 roc_auc  hand_till      0.632 Preprocessor1_Model1
#> # A tibble: 62,712 x 21
#>    id    .pred~1 .pred~2 .pred~3 .pred~4 .pred~5 .pred~6 .pred~7 .pred~8 .pred~9
#>    <chr>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
#>  1 trai~ 3.76e-4 0.00731   0.152 0.00368   0.313   0.361  0.0137 6.78e-4 0.00346
#>  2 trai~ 3.76e-4 0.00731   0.152 0.00368   0.313   0.361  0.0137 6.78e-4 0.00346
#>  3 trai~ 3.75e-4 0.00726   0.149 0.00369   0.318   0.359  0.0139 6.88e-4 0.00346
#>  4 trai~ 3.75e-4 0.00725   0.148 0.00370   0.318   0.359  0.0139 6.90e-4 0.00345
#>  5 trai~ 3.76e-4 0.00730   0.151 0.00370   0.314   0.361  0.0137 6.85e-4 0.00346
#>  6 trai~ 3.75e-4 0.00725   0.148 0.00371   0.318   0.359  0.0138 6.94e-4 0.00345
#>  7 trai~ 3.74e-4 0.00724   0.148 0.00371   0.319   0.359  0.0138 6.97e-4 0.00345
#>  8 trai~ 3.74e-4 0.00724   0.148 0.00373   0.319   0.358  0.0138 7.01e-4 0.00345
#>  9 trai~ 3.76e-4 0.00726   0.148 0.00371   0.318   0.359  0.0138 6.94e-4 0.00346
#> 10 trai~ 3.76e-4 0.00726   0.148 0.00371   0.318   0.359  0.0138 6.94e-4 0.00346
#> # ... with 62,702 more rows, 11 more variables: .pred_7543 <dbl>,
#> #   .pred_7550 <dbl>, .pred_7560 <dbl>, .pred_7570 <dbl>, .pred_7580 <dbl>,
#> #   .pred_7598 <dbl>, .pred_7599 <dbl>, .row <int>, .pred_class <fct>,
#> #   energy_source_heat_1 <fct>, .config <chr>, and abbreviated variable names
#> #   1: .pred_7500, 2: .pred_7501, 3: .pred_7510, 4: .pred_7511, 5: .pred_7520,
#> #   6: .pred_7530, 7: .pred_7540, 8: .pred_7541, 9: .pred_7542
#> Warning: While computing multiclass `sens()`, some levels had no true events (i.e. `true_positive + false_negative = 0`). 
#> Sensitivity is undefined in this case, and those levels will be removed from the averaged result.
#> Note that the following number of predicted events actually occured for each problematic event level:
#> '7550': 0
#> Warning: No observations were detected in `truth` for level(s): '7550'
#> Computation will proceed by ignoring those levels.
#> # A tibble: 4 x 3
#>   .metric  .estimator .estimate
#>   <chr>    <chr>          <dbl>
#> 1 accuracy multiclass     0.518
#> 2 sens     macro          0.173
#> 3 spec     macro          0.959
#> 4 roc_auc  hand_till      0.632
\end{verbatim}



\end{document}
